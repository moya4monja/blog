---
title: "190716_AWS_Fukuoka"
date: 2019-07-16T18:54:43+09:00
draft: false
---

# 概要
クラウドネイティブをお題目とした勉強会
- 会場：株式会社Fusic
- 時間：19:00～21:00
- [connpassのリンク](https://fukuoka-dev.connpass.com/event/136853/)
- ハッシュタグは #fukuoka_dev

# 発表内容
1. とりあえずサーバーレス
   - 発表者:AWSの西谷さん
   - AWSのソリューションアーキテクトで、部長やっている
   - サーバーレスおじさん
   - 「お金で時間を買う」という考え方
     - サーバー準備する時間をお金で買おうぞ！
     - 「差別化につながらない重労働」を「自分でやらない」←大事だよね
     - AWSのサーバーレス
       - Lambda
         - 客の触る範囲はアプリケーションコードだけ。
       - Fargate
         - 長時間のジョブ(>15min)実行するときは選ぶといいよ
    - まとめ
      - どうやって作るか迷ったら
        - とりあえずサーバーレス
        - うまくいかなかったらコンテナ、EC2

1. 	CacooにおけるコンテナとGoとgRPCなどの話
      - 発表者:Nulabのk木村さん
      - クラウドネイティブってなんぞ
        - スケーラブル、マイクロサービス。。。
      - cacooのバックエンドチームやってるよ
      - cacooの開発チームが海外とかにもあるから、組織もシステムも疎結合にしたいよね。ってなった話
      - Kubernetes
        - ホストVMも仮想化するよ←知らなかった。。。
      - EC2→ECS
        - 新しい機能を別サービスで
        - 既存の機能を切り出してDocker(コンテナ)化
      - ECS→Kubernetes
        - コンテナを徐々にKubernetesに放り込んでいった
      - Goはいいぞ
        - シングルバイナリ←ランタイムが必要ない
        - gRPC ←また出た
          - ローカルの関数を呼び出す感じで、ほかのサービスの関数呼び出せる
          - ProtocolBuffers
        - 単体テストどうするの？  
          - 同じサーバーインターフェースを「満たす」モックを実装
        - トランザクションはどうしてる？
          - サービスをまたいだトランザクションは「あきらめる」
          - トランザクションをまたぐようなサービスは細かく分けすぎじゃないかとアボカド

1. mockmockの大量のログをいい感じに捌きたい
   - 発表者：Fusicの毛利さん
   - mockmockサービス
     - 第一世代から第五世代まで
   - まとめ
     - 全部Serverlessでやってきてるよ
     - 大規模なデータを扱うとI/Oがボトルネックになりがち。

1. always.fanで初Dockerにチャレンジ、ECSの導入における紆余曲折
   - 会社で提供しているサービスで、初めてDocker使ったので、その発表だよ。
   - 発表者：イジゲン株式会社の平野さん
   - アジェンダの説明
   - これまでの環境
     - OpsWorks + Rails が基本スタイルだった
       - Chefに詳しいエンジニアが辞めるなど、いろいろ大変だった
   - Docker導入するぞ！
     - 会社が成長するにあたって、Docker使っていこう！
     - ECSとEKSで検討したよ
       - ECSを選択したよ  
         - 比較的敷居が低い
         - 事例も豊富
         - Fargateが魅力的
   - ECSの構成要素
     - クラスター
     - サービス
     - タスク
       - タスク定義:アプリケーションと連携するので、アップデート頻度が高い
       - 起動タイプ:EC2/Fargate
         - EC2:事前にEC2を起動、管理が必要、コンテナにアクセスできる
         - Fargate:サーバーレス、コンテナにはアクセスできない
     - 周辺サービス
       - ECS
       - ECR
       - ALB
       - Code Pipeline
         - Code build
     - ECS導入で躓いたてん
       - ロギング
         - ログドライバーを「awslogs」にして、Clouwd Watch logに掃き出し？
       - EC2の管理
         - スケールアップや、セキュリティアップデートは、作ってLB変えて、削除！
       - 定期実行
         - ScheduledTaskを利用
       - コンテナへのアクセス（ログイン）
       - Dockerイメージの作成方法
         - ソースコードからのイメージ作成
         - ローカル環境でイメージ作成
           - CLIでECRにプッシュ
       - タスク定義のCPU設定
       - エラー対応
     - 今後の課題
       - やりたいことはいろいろあるぞー
         - オートスケーリング
         - マイクロサービス化
         - etc...

1. 最後に
   - Serverless Days 福岡やるんで、よろ！
   - 12月頃だお